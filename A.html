<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>백설공주 이야기의 다음 문장, 어떻게 이어질까요?</title>

  <!-- Gowun Batang 폰트 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang&display=swap" rel="stylesheet">

  <style>
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background-image: url('paper2.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      font-family: 'Gowun Batang', serif;
      color: #ffffff;
      text-align: center;
      padding: 0 20px;
    }

    /* 제목 */
    h1 {
      font-size: 3.4rem;
      font-weight: 600;
      margin-bottom: 60px;
      line-height: 1.4;
      white-space: pre-line;
      text-align: center;
      color: #ffffff;
      font-family: 'Gowun Batang', serif;
    }

    /* 입력창 */
    input {
      width: 88vw;
      max-width: 560px;
      font-size: 1.8rem;
      padding: 26px 30px;
      border: 4px solid #ffffff;
      border-radius: 45px;
      outline: none;
      text-align: center;
      margin-bottom: 28px;
      background: rgba(255, 255, 255, 0.20);
      color: #ffffff;
      transition: 0.3s ease;
      font-family: 'Gowun Batang', serif;
    }

    input::placeholder {
      color: rgba(255, 255, 255, 0.6);
      font-size: 1.4rem;
      font-family: 'Gowun Batang', serif;
    }

    input:focus {
      background: rgba(255, 255, 255, 0.28);
    }

    /* 작성 버튼 */
    button {
      font-family: 'Gowun Batang', serif;
      font-size: 1.8rem;
      padding: 20px 52px;
      border-radius: 45px;
      border: 4px solid #ffffff;
      background: rgba(255, 255, 255, 0.15);
      color: #ffffff;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.25s ease;
    }

    button:hover {
      background: #ffffff;
      color: #333333;
    }

    button:active {
      transform: scale(0.97);
    }

    /* 팝업 오버레이 */
    #popupOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.45); 
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 20;
    }

    /* 팝업 박스 */
    #popupBox {
      background: rgba(255,255,255,0.9);
      padding: 28px 40px;
      border-radius: 22px;
      font-size: 1.7rem;
      color: #333;
      box-shadow: 0 0 20px rgba(0,0,0,0.35);
      font-family: 'Gowun Batang', serif;
      text-align: center;
    }

  </style>
</head>

<body>
  <h1>백설공주 이야기의 다음 문장,  
어떻게 이어질까요?</h1>

  <input type="text" id="msg" placeholder="여기에 문장을 입력하세요" />
  <button id="sendBtn">작성</button>

  <!-- 팝업 -->
  <div id="popupOverlay">
    <div id="popupBox">새로운 맥락이 작성되었습니다!<br>벽면에 작성된 책을 봐주세요:)</div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDwMaWKl3EgBMMGKy5llg3OsscHbZOrhYo",
      authDomain: "display1-2e379.firebaseapp.com",
      databaseURL: "https://display1-2e379-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "display1-2e379",
      storageBucket: "display1-2e379.firebasestorage.appspot.com",
      messagingSenderId: "509686302807",
      appId: "1:509686302807:web:7a73181d53f7ca22363b12"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // 전송 기능
    document.getElementById("sendBtn").addEventListener("click", sendMessage);
    document.getElementById("msg").addEventListener("keypress", (e) => {
      if (e.key === "Enter") sendMessage();
    });

    function sendMessage() {
      const msg = document.getElementById("msg").value.trim();
      if (!msg) {
        alert("문장을 입력해주세요!");
        return;
      }

      db.ref("messages")
        .push({ text: msg })
        .then(() => {
          document.getElementById("msg").value = "";
          showPopup();
        })
        .catch((err) => console.error("전송 오류:", err));
    }

    // 팝업 표시 함수
    function showPopup() {
      const overlay = document.getElementById("popupOverlay");
      overlay.style.display = "flex";

      setTimeout(() => {
        overlay.style.display = "none";
      }, 2200);
    }
  </script>
</body>
</html>

